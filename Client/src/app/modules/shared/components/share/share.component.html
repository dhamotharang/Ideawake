<div class="shareDropdown" (click)="open(shareOpportunity)">
  <button class="btn btn-white text-muted btn-sm bold montserrat">
    <fa-icon [icon]="['fas', 'share']"></fa-icon>
    <span class="d-none d-md-inline">
      {{ 'SocialActivity.Share' | translationPipe }}
    </span>
  </button>
</div>
<ng-template #shareOpportunity let-modal>
  <div class="modal-header card-header pb-2 bg-light border-bottom-0">
    <p class="small uppercase bold montserrat uppercase pt-1 mb-0">
      {{ 'SocialActivity.Share' | translationPipe }}
    </p>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body bg-light pt-0 pb-0 px-1">
    <div class="row">
      <div class="col-12">
        <form>
          <div class="form-group px-3 mb-0">
            <div class="row">
              <div class="pl-2 pr-1 col-12">
                <div class="row pt-2">
                  <div class="col-12">
                    <form>
                      <div class="form-group mb-0 px-2 pt-0 pb-0">
                        <label class="bold">Search Community Members</label>
                        <input
                          type="search"
                          class="form-control"
                          placeholder="Start typing users..."
                          (ngModelChange)="searchUsers($event)"
                          [(ngModel)]="searchTerm"
                          name="searchTerm"
                        />
                      </div>
                    </form>
                  </div>
                </div>

                <p class="form-text small text-muted mb-2 pr-2 pl-2">
                  {{ 'IdeaPage.shareOpportunityUser' | translationPipe }}
                </p>
                <div class="row">
                  <div class="col-12">
                    <!-- <div
                      class="custom-control custom-checkbox"
                      style="padding-left: 2rem;"
                    >
                      <input
                        type="checkbox"
                        class="custom-control-input"
                        id="selectAllAddUsers"
                        (click)="addAllUsers()"
                        [checked]="checkAllUsers()"
                      />
                      <label
                        class="custom-control-label mb-0 bold"
                        for="selectAllAddUsers"
                      >
                        Select All {{ users?.length }} User(s)
                      </label>
                    </div> -->
                    <hr class="mb-0 mt-1" />
                    <div class="shareScrollMaxHeight">
                      <div
                        *ngFor="let user of users; let i = index"
                        class="globalUserSearchResult addHover"
                      >
                        <div class="custom-control custom-checkbox pointer">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            [id]="user.id"
                            (click)="clicked(user)"
                            [checked]="findUser(user)"
                          />
                          <label
                            class="custom-control-label pointer w-100"
                            [for]="user.id"
                          >
                            <div class="media">
                              <img
                                [defaultImage]="defaultImage"
                                [lazyLoad]="user?.profileImage?.url || image"
                                class="mr-2 ml-1 rounded-circle image"
                              />
                              <div class="media-body">
                                <p class="mt-0 mb-0">
                                  {{ user.firstName }} {{ user.lastName }}
                                </p>
                                <ul class="list-inline mb-0">
                                  <li class="list-inline-item mr-0">
                                    <p class="small mb-0 text-muted">
                                      {{ user.userName }}
                                    </p>
                                  </li>
                                  <li class="list-inline-item ml-1 mr-1">
                                    <fa-icon
                                      [icon]="['fas', 'circle']"
                                      class="small separatorIcon text-muted"
                                    ></fa-icon>
                                  </li>
                                  <li class="list-inline-item mr-0">
                                    <p class="small mb-0 text-muted">
                                      {{ user.role?.title || 'User' }}
                                    </p>
                                  </li>
                                  <li class="list-inline-item ml-1 mr-1">
                                    <fa-icon
                                      [icon]="['fas', 'circle']"
                                      class="small separatorIcon text-muted"
                                    ></fa-icon>
                                  </li>
                                  <li class="list-inline-item">
                                    <p class="small mb-0 text-muted">
                                      {{ user.email }}
                                    </p>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="row pb-4 mt-2">
      <div class="col-12">
        <div class="px-3">
          <label>
            {{ 'SocialActivity.Message' | translationPipe }}
          </label>
          <textarea
            [(ngModel)]="sharingMessage"
            class="form-control"
            rows="2"
            placeholder="{{
              'SocialActivity.MessagePlaceholder' | translationPipe
            }}"
          >
          </textarea>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer bg-light">
    <button class="btn btn-light border" (click)="modal.dismiss('Cross click')">
      {{ 'SocialActivity.Cancel' | translationPipe }}
    </button>
    <button class="btn btn-primary ml-2" (click)="saveSharing(modal)">
      {{ 'SocialActivity.Share' | translationPipe }}
    </button>
  </div>
</ng-template>

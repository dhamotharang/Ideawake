<div
  class="alert alert-info shadow py-3 border-0 rounded-0 mb-0 negativeAlertMargins"
  *ngIf="challenge?.alertMessage"
>
  <div class="row">
    <div class="col-12 col-md-10 offset-md-1">
      <p class="text-center text-medium mb-0">
        {{ challenge.alertMessage | dynamicTranslation }}
        <!-- <button class="btn btn-sm btn-info ml-2" routerLink="/challenge-change-phase">Change Phase</button></p> -->
      </p>
    </div>
  </div>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-12 px-0">
      <!-- challenge content -->
      <div class="row pb-3">
        <div class="col-12">
          <app-challenge-top-loader
            *ngIf="isLoading"
          ></app-challenge-top-loader>
          <div class="row" *ngIf="!isLoading">
            <div class="col-12 px-0">
              <div
                class="card rounded-0 border-0 shadow-sm mb-0 mb-md-3 bg-transparent"
              >
                <img
                  class="banner addDarkenLayer"
                  [defaultImage]="defaultImage"
                  [lazyLoad]="challenge?.bannerImage || defaultBanner"
                />
                <div class="card-body addDarkenLayer">
                  <div class="row position-relative">
                    <div class="col-12 col-md-10 offset-md-1">
                      <div class="row">
                        <div class="col-12 col-md-10">
                          <app-challenge-top
                            [challenge]="challenge"
                            [userChallengePermissions]="
                              userChallengePermissions
                            "
                            (update)="getChallenge()"
                          ></app-challenge-top>
                        </div>
                        <div class="d-none d-md-block col-md-2 mt-3">
                          <app-follow-button
                            [data]="challenge"
                            [entityObject]="{
                              id: challenge?.id,
                              typeId: challengeEntity?.id,
                              entity: challengeEntity?.name
                            }"
                            [followersCount]="challenge?.followersCount"
                            (followed)="challenge = $event"
                          >
                          </app-follow-button>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12 col-md-9">
                          <div class="row">
                            <div class="col-12">
                              <h3 class="text-white challengeTitle montserrat">
                                {{ challenge?.title | dynamicTranslation }}
                              </h3>
                              <p class="text-white challengeDescription mb-3">
                                <span *ngIf="!challenge?.readMore"
                                  >{{
                                    challenge?.description
                                      | slice: 0:250
                                      | dynamicTranslation
                                  }}
                                  <span
                                    *ngIf="challenge?.description?.length > 250"
                                    class="text-primary pointer"
                                    (click)="challenge.readMore = true"
                                    >{{
                                      'ChallengeList.Labels.readMore'
                                        | translationPipe
                                    }}...</span
                                  >
                                </span>
                                <span *ngIf="challenge?.readMore"
                                  >{{
                                    challenge?.description | dynamicTranslation
                                  }}
                                  <span
                                    class="text-primary pointer"
                                    (click)="challenge.readMore = false"
                                    >{{
                                      'ChallengeList.Labels.readLess'
                                        | translationPipe
                                    }}...</span
                                  >
                                </span>
                              </p>
                              <ul class="list-inline mb-2">
                                <li class="list-inline-item">
                                  <span
                                    class="text-medium montserrat bold"
                                    [ngClass]="
                                      challengeStatuses[challenge?.status]
                                        ?.font_bg
                                    "
                                  >
                                    {{
                                      'ChallengeView.Status' | translationPipe
                                    }}
                                    -
                                    {{
                                      challengeStatuses[challenge?.status]
                                        ?.status
                                    }}
                                  </span>
                                </li>
                                <li class="list-inline-item d-none">
                                  <span
                                    class="badge badgePadding bg-transparent text-medium"
                                  >
                                    <span class="font-weight-normal text-light">
                                      <fa-icon
                                        [icon]="['fas', 'circle']"
                                        class="text-primary small"
                                        style="position: relative; bottom: 2px;"
                                      ></fa-icon>
                                      Submissions - Open
                                    </span>
                                  </span>
                                </li>
                              </ul>
                              <ul
                                class="list-inline mb-2 pb-2 pt-1 text-white small d-none"
                              >
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'globe']"
                                    class="text-primary"
                                  ></fa-icon>
                                  1,250 Targeted
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'trophy']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{ challenge.prizesCount }}
                                  {{
                                    'ChallengeList.Labels.Prizes'
                                      | translationPipe
                                  }}
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'user']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{
                                    challenge?.challengeParticipant?.length || 0
                                  }}
                                  {{
                                    'ChallengeTop.Labels.Participants'
                                      | translationPipe
                                  }}
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'eye']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{ challenge?.viewCount || 0 }}
                                  {{
                                    'ChallengeTop.Labels.Views'
                                      | translationPipe
                                  }}
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'lightbulb']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{ challenge?.opportunityCount || 0 }}
                                  {{
                                    'ChallengeTop.Labels.Ideas'
                                      | translationPipe
                                  }}
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'comment']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{ challenge?.opportunityCommentCounts || 0 }}
                                  {{
                                    'ChallengeTop.Labels.Comments'
                                      | translationPipe
                                  }}
                                </li>
                                <li class="list-inline-item pr-2">
                                  <fa-icon
                                    [icon]="['fas', 'thumbs-up']"
                                    class="text-primary"
                                  ></fa-icon>
                                  {{ challenge?.opportunityVoteCounts || 0 }}
                                  {{
                                    'ChallengeTop.Labels.Votes'
                                      | translationPipe
                                  }}
                                </li>
                              </ul>
                            </div>
                          </div>
                          <div class="row pt-3">
                            <div class="col-9">
                              <!-- <div class="row">
                                                  <div class="col-6 pr-0">
                                                    <button
                                                      class="btn btn-primary btn-block mb-3"
                                                      (click)="openPostIdea(challenge?.id)"
                                                    >
                                                      <fa-icon
                                                        [icon]="['fas', 'lightbulb-on']"
                                                        class="pr-1"
                                                      ></fa-icon>
                                                      {{
                                                        'ChallengeTop.Labels.PostIdea' | translationPipe
                                                      }}
                                                    </button>
                                                  </div>
                                                  <div class="col-6">
                                                    <button
                                                      class="btn btn-outline-primary btn-block mb-2"
                                                      routerLink="/challenges/ideas/{{ challenge?.id }}"
                                                    >
                                                      <fa-icon
                                                        [icon]="['fas', 'eye']"
                                                        class="pr-1"
                                                      ></fa-icon>
                                                      {{
                                                        'ChallengeTop.Labels.BrowseIdeas'
                                                          | translationPipe
                                                      }}
                                                    </button>
                                                  </div>
                                                </div> -->
                            </div>
                          </div>
                        </div>
                        <div class="col-12 col-md-3">
                          <div class="row mt-2">
                            <!-- start of custom terms and conditions -->
                            <div class="col-6 col-md-12 pl-0 pl-md-3 d-none">
                              <button
                                class="btn btn-primary btn-lg btn-block bold mb-3 montserrat"
                                (click)="open(registerModal)"
                              >
                                Register for Challenge
                              </button>
                              <ng-template #registerModal let-modal>
                                <div
                                  class="modal-header card-header bg-white pb-0 pt-3 border-bottom-0"
                                >
                                  <p class="small uppercase bold mb-0">
                                    {{ challenge?.title | dynamicTranslation }}
                                    Terms & Conditions
                                  </p>
                                  <button
                                    type="button"
                                    class="close"
                                    aria-label="Close"
                                    (click)="modal.dismiss('Cross click')"
                                  >
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body modalScrollMaxHeight">
                                  <div class="row">
                                    <div class="col-12">
                                      <div
                                        class="alert alert-info text-medium p-2"
                                      >
                                        In order to participate in this
                                        challenge, please accept the terms and
                                        conditions below.
                                      </div>
                                      <p>
                                        Put in custom terms and conditions from
                                        the challenge settings page here!
                                      </p>
                                    </div>
                                  </div>
                                </div>
                                <div class="modal-footer">
                                  <button
                                    class="btn btn-light btn-lg border"
                                    (click)="modal.dismiss('Cross click')"
                                  >
                                    Decline
                                  </button>
                                  <button
                                    class="btn btn-primary btn-lg ml-2"
                                    (click)="modal.dismiss('Cross click')"
                                  >
                                    Accept Terms and Conditions
                                  </button>
                                </div>
                              </ng-template>
                            </div>
                            <!-- end of custom terms and conditions -->
                            <div
                              class="col-6 col-md-12"
                              *ngIf="userChallengePermissions?.postOpportunity"
                            >
                              <button
                                class="btn btn-primary btn-lg btn-block mb-3 montserrat"
                                (click)="openPostIdea()"
                              >
                                <fa-icon
                                  [icon]="[
                                    'fas',
                                    challenge?.opportunityType?.icon
                                  ]"
                                  class="pr-1"
                                ></fa-icon>
                                {{ 'ChallengeView.Post' | translationPipe }}
                                <span class="d-none d-md-inline">{{
                                  challenge?.opportunityType?.name
                                }}</span>
                              </button>
                            </div>
                            <div
                              class="col-6 col-md-12"
                              *ngIf="!userChallengePermissions?.postOpportunity"
                            >
                              <button
                                class="btn btn-light text-muted btn-lg bold btn-block mb-3 disabled montserrat"
                                style="cursor: no-drop;"
                              >
                                <fa-icon
                                  [icon]="['fas', 'lock']"
                                  style="font-size: 0.9rem;"
                                ></fa-icon>
                                {{
                                  'ChallengeView.PostingClosed'
                                    | translationPipe
                                }}
                              </button>
                            </div>
                            <div class="col-6 col-md-12 pl-0 pl-md-3">
                              <button
                                class="btn text-white btn-outline-primary btn-lg montserrat btn-block mb-2"
                                [routerLink]="[
                                  '/challenges/ideas/',
                                  challenge?.id
                                ]"
                              >
                                <span class="text-white">
                                  <fa-icon
                                    [icon]="['fas', 'eye']"
                                    class="pr-1"
                                  ></fa-icon>
                                  {{ 'ChallengeView.Browse' | translationPipe }}
                                  <span class="d-none d-md-inline">{{
                                    challenge?.opportunityType?.name | pluralize
                                  }}</span>
                                  ({{ challenge?.opportunityCount || 0 }})
                                </span>
                              </button>
                            </div>
                          </div>
                          <div
                            class="row flex-row"
                            *ngIf="challenge?.haveExpiry"
                            style="height: 100px;"
                          >
                            <div class="col-12 d-flex align-items-end">
                              <div class="row mt-2 mt-auto">
                                <div class="col-12">
                                  <p
                                    class="small montserrat bold uppercase mb-2 text-white mt-1 float-right"
                                  >
                                    {{
                                      'ChallengeView.ChallengeTimeline'
                                        | translationPipe
                                    }}
                                  </p>
                                  <ul
                                    class="list-inline text-white float-right mb-0 pt-1"
                                  >
                                    <li
                                      class="list-inline-item text-center pr-3"
                                    >
                                      <h4 class="mb-0 bold">
                                        {{ expiryCounter?.days || 0 }}
                                      </h4>
                                      <p
                                        class="text-light uppercase mb-0 small"
                                      >
                                        {{
                                          'ChallengeView.Days' | translationPipe
                                        }}
                                      </p>
                                    </li>
                                    <li
                                      class="list-inline-item text-center pr-3"
                                    >
                                      <h4 class="mb-0 bold">
                                        {{ expiryCounter?.hours || 0 }}
                                      </h4>
                                      <p
                                        class="text-light uppercase mb-0 small"
                                      >
                                        {{
                                          'ChallengeView.Hours'
                                            | translationPipe
                                        }}
                                      </p>
                                    </li>
                                    <li
                                      class="list-inline-item text-center pr-3"
                                    >
                                      <h4 class="mb-0 bold">
                                        {{ expiryCounter?.minutes || 0 }}
                                      </h4>
                                      <p
                                        class="text-light uppercase mb-0 small"
                                      >
                                        {{
                                          'ChallengeView.Minutes'
                                            | translationPipe
                                        }}
                                      </p>
                                    </li>
                                    <li class="list-inline-item text-center">
                                      <h4 class="mb-0 bold">
                                        {{ expiryCounter?.seconds || 0 }}
                                      </h4>
                                      <p
                                        class="text-light uppercase mb-0 small"
                                      >
                                        {{
                                          'ChallengeView.Seconds'
                                            | translationPipe
                                        }}
                                      </p>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="isLoading">
            <div class="col-10 offset-1">
              <div class="row">
                <div class="col-12 col-md-8">
                  <app-form-loader></app-form-loader>
                </div>
                <div class="d-none d-md-block col-md-4">
                  <app-form-loader></app-form-loader>
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="!challenge?.hasAdditionalBrief">
            <div class="col-12 col-md-10 offset-md-1">
              <div class="row pt-md-3">
                <div *ngIf="!isLoading" class="col-12 col-md-9">
                  <app-challenge-ideas-list
                    [challenge]="challenge"
                    [userChallengePermissions]="userChallengePermissions"
                    [permissionsData]="permissionsData"
                  >
                  </app-challenge-ideas-list>
                </div>
                <div class="d-none d-md-inline-block col-md-3">
                  <div
                    class="card shadow-sm mb-3"
                    *ngIf="challenge?.challengeAttachments.length"
                  >
                    <div class="card-body px-3 py-2">
                      <!-- <div class="row">
                        <div class="col-12">
                          <p class="bold mb-2">
                            Challenge Sponsors
                          </p>
                          <ul class="list-inline mb-2">
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                          </ul>
                        </div>
                      </div> -->
                      <!-- <div class="row">
                        <div class="col-12">
                          <p class="bold mb-2 mt-2">
                            Challenge Moderators
                          </p>
                          <ul class="list-inline mb-2">
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                            <li class="list-inline-item removeMargins">
                              <img
                                class="teamImage rounded-circle"
                                src="https://ideawake-test.s3.amazonaws.com/attachments/users/a33e5080-79ab-11ea-931d-6bab431a940f.png"
                              />
                            </li>
                          </ul>
                        </div>
                      </div> -->
                      <div class="row">
                        <div class="col-12">
                          <p
                            class="bold uppercase text-medium text-muted montserrat mb-3 mt-2"
                          >
                            {{
                              'ChallengeView.SupportingFiles' | translationPipe
                            }}
                          </p>
                          <ul class="list-unstyled">
                            <li
                              class="mb-1"
                              *ngFor="
                                let attachment of challenge?.challengeAttachments
                              "
                            >
                              <div class="media">
                                <fa-icon
                                  [icon]="['fas', 'file-alt']"
                                  class="text-muted text-medium adjustFloat"
                                ></fa-icon>
                                <div class="media-body pl-2">
                                  <a
                                    class="inverseLinkDark text-medium"
                                    [href]="attachment.url"
                                    target="_blank"
                                    [ngbTooltip]="attachment.name"
                                    >{{
                                      attachment.name.length >= 35
                                        ? attachment.name.substring(0, 35) +
                                          '...'
                                        : attachment.name
                                    }}</a
                                  >
                                </div>
                              </div>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <!-- <div class="row">
                        <div class="col-12">
                          <p class="bold mb-2 mt-2">
                            Submit solutions via email
                          </p>
                          <p class="text-medium">
                            Submit solutions on the go by sending them via email
                            to
                            <span class="text-primary bold"
                              >eliminatewaste@aurora.org</span
                            >
                          </p>
                        </div>
                      </div> -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="row" *ngIf="prizes?.length >= 1">
                        <div class="col-12">
                          <div class="card shadow-sm mb-3">
                            <div class="card-body pl-3 pr-2 pb-0 pt-2">
                              <div class="row">
                                <div class="col-12">
                                  <ul class="list-inline mb-1">
                                    <li class="list-inline-item">
                                      <p
                                        class="uppercase bold text-medium text-muted montserrat mb-0 mt-1"
                                      >
                                        {{ challenge?.prizesCount }}
                                        {{
                                          'ChallengeList.Labels.Prizes'
                                            | translationPipe
                                        }}
                                      </p>
                                    </li>
                                    <li class="list-inline-item float-right">
                                      <app-prize-add
                                        (dataSet)="newPrize($event)"
                                        [userPermissions]="
                                          userChallengePermissions
                                        "
                                      >
                                      </app-prize-add>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <!-- <div class="row">
                                                          <div class="col-12">
                                                            <ul class="list-inline">
                                                              <li class="list-inline-item">
                                                                <p class="uppercase bold text-medium text-muted montserrat mb-2">
                                                                  Challenge Prizes
                                                                </p>
                                                              </li>
                                                              <li class="list-inline-item float-right">
                                                                <app-prize-add (dataSet)="newPrize($event)" [userPermissions]="userChallengePermissions"></app-prize-add>
                                                              </li>
                                                            </ul>
                                                          </div>
                                                        </div> -->
                              <span *ngFor="let prize of prizes">
                                <app-prize-widget
                                  [prize]="prize"
                                  (updated)="prizeUpdated($event)"
                                  [userPermissions]="userChallengePermissions"
                                >
                                </app-prize-widget>
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white border-bottom-0 pb-0 px-3">
                      <p
                        class="uppercase text-muted bold text-medium mb-1 montserrat"
                      >
                        {{ challenge?.opportunityType?.name }}
                        {{ 'ChallengeView.Statuses' | translationPipe }}
                      </p>
                    </div>
                    <div *ngIf="chartData?.length" class="card-body px-3 py-2">
                      <canvas
                        id="donutChart"
                        baseChart
                        [datasets]="chartData"
                        [chartType]="chartType"
                        [options]="chartOptions"
                        [labels]="chartLabelData"
                        [legend]="true"
                      >
                      </canvas>
                      <!-- <div class="noDataPlaceholder" *ngIf="!ideas?.length">
                        <ul class="list-unstyled text-center">
                          <li>
                            <fa-icon
                              [icon]="['fas', 'chart-pie']"
                              class="text-muted"
                              style="font-size: 3rem;"
                            ></fa-icon>
                          </li>
                          <li>
                            <p class="text-medium text-muted">
                              No {{ challenge?.opportunityType?.name }}s have been posted yet.
                            </p>
                          </li>
                        </ul>
                      </div> -->
                    </div>
                  </div>
                  <ng-container *ngIf="challengeId && challengeEntity">
                    <div class="card">
                      <div
                        class="card-header bg-white border-bottom-0 pb-0 px-3"
                      >
                        <p
                          class="uppercase text-muted bold text-medium mb-1 montserrat"
                        >
                          {{ 'ChallengeView.RecentActivity' | translationPipe }}
                        </p>
                      </div>
                      <div class="card-body px-3 pt-2 pb-0">
                        <app-activity-container
                          [colClass]="'col-12'"
                          [noPadding]="true"
                          [entityType]="challengeEntity.id"
                          [challengeId]="challengeId"
                        ></app-activity-container>
                      </div>
                    </div>
                  </ng-container>
                  <!-- end challenge manage -->
                </div>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="challenge?.hasAdditionalBrief">
            <div class="col-12 col-md-10 offset-md-1">
              <div class="row">
                <div class="col-12 col-md-8">
                  <div class="row" *ngIf="!isLoading">
                    <div class="col-12">
                      <div class="row mt-0 mt-md-3">
                        <div class="col-12 removePaddingOnMobile">
                          <app-updates-summary-list
                            [level]="'challenge'"
                            [inCard]="true"
                            [entityObjectId]="challengeId"
                          ></app-updates-summary-list>
                        </div>
                      </div>
                      <div class="row mt-0 mt-md-3">
                        <div class="col-12 removePaddingOnMobile">
                          <div class="card mb-0 mb-md-3 shadow-sm">
                            <div
                              class="card-header bg-white border-bottom-0 pb-0"
                            >
                              <p
                                class="uppercase text-medium montserrat text-muted bold mb-0"
                              >
                                {{
                                  'ChallengeView.MoreAboutChallenge'
                                    | translationPipe
                                }}
                              </p>
                            </div>
                            <div
                              class="card-body pt-3 pb-0"
                              [innerHtml]="
                                challenge?.additionalBrief
                                  | dynamicTranslation
                                  | safeHtml
                              "
                            ></div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12 removePaddingOnMobile">
                          <div
                            class="card shadow-sm mb-3"
                            *ngIf="ideas?.length"
                          >
                            <div
                              class="card-header px-3 bg-white pb-0 pt-2 border-bottom-0"
                            >
                              <ul class="list-inline">
                                <li class="list-inline-item">
                                  <p
                                    class="uppercase montserrat text-medium text-muted bold mb-0"
                                  >
                                    {{
                                      'ChallengeView.RecentlyPosted'
                                        | translationPipe
                                    }}
                                  </p>
                                </li>
                                <li class="list-inline-item float-right mr-1">
                                  <a
                                    routerLink="/challenges/ideas/{{
                                      challenge?.id
                                    }}"
                                    class="bold inverseLink text-medium"
                                  >
                                    {{
                                      'ChallengeView.ViewAll' | translationPipe
                                    }}
                                    ({{ challenge?.opportunityCount || 0 }})
                                  </a>
                                </li>
                              </ul>
                            </div>
                            <div class="card-body px-3 pb-3 pt-0">
                              <div class="row">
                                <div class="col-12">
                                  <!-- Recent Ideas -->
                                  <div
                                    *ngIf="ideas?.length"
                                    class="mt-0"
                                    style="
                                      margin-left: 0.65rem;
                                      margin-right: 0.65rem;
                                    "
                                  >
                                    <div class="row">
                                      <div
                                        class="col-12 col-md-4 px-1 mb-3 mb-md-0"
                                        *ngFor="
                                          let idea of ideas;
                                          let i = index
                                        "
                                      >
                                        <div
                                          (click)="updateSummaryParams(idea, i)"
                                        >
                                          <app-idea-widget-small
                                            [idea]="idea"
                                            [upvotes]="upvotes"
                                            [permissions]="permissionsData"
                                          >
                                          </app-idea-widget-small>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- Recent Ideas End -->
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row" *ngIf="challengeId && challengeEntity">
                        <div class="col-12 removePaddingOnMobile">
                          <div class="card">
                            <div
                              class="card-header px-3 bg-white pb-0 border-bottom-0"
                            >
                              <p
                                class="uppercase text-medium text-muted bold mb-0 montserrat"
                              >
                                {{
                                  'ChallengeView.RecentActivity'
                                    | translationPipe
                                }}
                              </p>
                            </div>
                            <div class="card-body pt-0">
                              <app-activity-container
                                [colClass]="'col-12'"
                                [noPadding]="true"
                                [entityType]="challengeEntity.id"
                                [challengeId]="challengeId"
                              ></app-activity-container>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ng-container *ngIf="challengeId && challengeEntity">
                    <!-- <p
                      class="uppercase text-muted bold text-medium mb-0 montserrat"
                    >
                      Recent Activity
                    </p>
                    <app-activity-container
                      [colClass]="'col-12'"
                      [noPadding]="true"
                      [entityType]="challengeEntity.id"
                      [challengeId]="challengeId"
                    ></app-activity-container> -->
                  </ng-container>
                </div>
                <div class="col-12 col-md-4">
                  <div
                    class="card shadow-sm mb-0 mt-3"
                    *ngIf="challenge?.challengeAttachments.length"
                  >
                    <div class="card-body px-3 py-2">
                      <p
                        class="montserrat bold uppercase mb-2 mt-1 text-muted text-medium"
                      >
                        {{ 'ChallengeView.SupportingFiles' | translationPipe }}
                      </p>
                      <div class="row">
                        <div class="col-12">
                          <ul class="list-unstyled">
                            <li
                              class="mb-1"
                              *ngFor="
                                let attachment of challenge?.challengeAttachments
                              "
                            >
                              <fa-icon
                                [icon]="['fas', 'file-alt']"
                                class="text-muted text-medium"
                              ></fa-icon>
                              <a
                                class="inverseLinkDark text-medium ml-2"
                                [href]="attachment.url"
                                target="_blank"
                                [ngbTooltip]="attachment.name"
                                >{{
                                  attachment.name.length >= 35
                                    ? attachment.name.substring(0, 35) + '...'
                                    : attachment.name
                                }}</a
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                      <!-- <div class="row">
                        <div class="col-12">
                          <p class="bold mb-2 mt-2">
                            Submit solutions via email
                          </p>
                          <p class="text-medium">
                            Submit solutions on the go by sending them via email
                            to
                            <span class="text-primary bold"
                              >eliminatewaste@aurora.org</span
                            >
                          </p>
                        </div>
                      </div> -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="row" *ngIf="prizes.length >= 1">
                        <div class="col-12">
                          <div class="card shadow-sm mb-3 mt-3">
                            <div
                              class="card-header border-bottom-0 bg-white px-3 pb-0 pt-2"
                            >
                              <div class="row">
                                <div class="col-12">
                                  <ul class="list-inline mb-1">
                                    <li class="list-inline-item">
                                      <p
                                        class="uppercase bold text-medium text-muted montserrat mb-0"
                                      >
                                        {{ challenge.prizesCount }}
                                        {{
                                          'ChallengeList.Labels.Prizes'
                                            | translationPipe
                                        }}
                                      </p>
                                    </li>
                                    <li class="list-inline-item float-right">
                                      <app-prize-add
                                        (dataSet)="newPrize($event)"
                                        [userPermissions]="
                                          userChallengePermissions
                                        "
                                      >
                                      </app-prize-add>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                            <div class="card-body pl-3 pr-2 py-0">
                              <span *ngFor="let prize of prizes">
                                <app-prize-widget
                                  [prize]="prize"
                                  (updated)="prizeUpdated($event)"
                                  [userPermissions]="userChallengePermissions"
                                >
                                </app-prize-widget>
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <p class="uppercase bold text-muted mb-2">Popular Tags</p>
                            <div class="card shadow-sm mb-4">
                              <div class="card-body p-0">
                                <img
                                  src="https://media.nngroup.com/media/editor/2012/11/18/wordle-word-cloud-applications.png"
                                  class="w-100"
                                />
                              </div>
                            </div> -->
                  <ul class="list-inline mb-2 d-none">
                    <li class="list-inline-item">
                      <p class="uppercase montserrat bold text-muted mb-0">
                        {{ 'ChallengeView.Updates' | translationPipe }}
                      </p>
                    </li>
                    <li class="list-inline-item float-right">
                      <app-update-create
                        [level]="'challenge'"
                        [entityObjectId]="challengeId"
                      ></app-update-create>
                    </li>
                  </ul>
                  <div class="card shadow-sm mb-4 d-none">
                    <div class="card-body p-2">
                      <app-updates-list></app-updates-list>
                      <div
                        class="btn btn-outline-primary btn-sm btn-block mt-1"
                      >
                        {{ 'ChallengeView.ViewAllUpdates' | translationPipe }}
                      </div>
                    </div>
                    <!-- <div class="card-footer bg-white border-top-0 py-2">

                    </div> -->
                  </div>
                  <div class="row">
                    <div class="col-12 removePaddingOnMobile">
                      <div class="card shadow-sm mb-3 mt-3">
                        <div class="card-header bg-white border-bottom-0 pb-0">
                          <p
                            class="uppercase montserrat bold text-muted text-medium mb-2"
                          >
                            {{ challenge?.opportunityType?.name }}
                            {{ 'ChallengeView.Statuses' | translationPipe }}
                          </p>
                        </div>
                        <div *ngIf="chartData?.length" class="card-body p-3">
                          <canvas
                            id="donutChart-mobile"
                            baseChart
                            [datasets]="chartData"
                            [chartType]="chartType"
                            [options]="chartOptions"
                            [labels]="chartLabelData"
                            [legend]="true"
                          >
                          </canvas>
                          <!-- <div class="noDataPlaceholder" *ngIf="!ideas?.length">
                            <ul class="list-unstyled text-center">
                              <li>
                                <fa-icon [icon]="['fas', 'chart-pie']" class="text-muted" style="font-size: 3rem;"></fa-icon>
                              </li>
                              <li>
                                <p class="text-medium text-muted">
                                  No {{ challenge?.opportunityType?.name }}s have been posted yet.
                                </p>
                              </li>
                            </ul>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- challenge content -->
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div
    [ngClass]="modal ? 'col-12' : 'col-12 col-md-8'"
    class="removePaddingOnMobile"
  >
    <div class="card shadow-sm">
      <div class="card-header py-2">
        <ul class="list-inline mb-0">
          <li class="list-inline-item">
            <p class="uppercase montserrat bold text-muted mb-0 pt-1">
              {{ 'ChallengePost.Labels.ChallengeSettings' | translationPipe }}
            </p>
          </li>
          <li class="list-inline-item float-right" *ngIf="modal">
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="close()"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </li>
          <li class="list-inline-item float-right pt-1" *ngIf="!modal">
            <p class="small bold uppercase text-muted mb-0">
              Step 4 of 5
            </p>
          </li>
        </ul>
      </div>
      <div
        class="card-body p-0"
        [ngClass]="modal ? 'modalScrollMaxHeight hideOverflow' : ''"
      >
        <div class="row">
          <div class="col-12">
            <div class="card rounded-top-0 border-top-0">
              <!-- <div
                class="card-header pointer addHoverTwo"
                (click)="toggleCollaboration = !toggleCollaboration"
              >
                <div class="media">
                  <fa-icon
                    [icon]="['fas', 'comments-alt']"
                    class="text-muted iconLarge mr-3"
                  ></fa-icon>
                  <div class="media-body">
                    <ul class="list-inline mb-0">
                      <li class="list-inline-item">
                        <p class="mb-0">
                          Anonymous, Collaboration, and Submission Visibility
                          Settings
                        </p>
                      </li>
                      <li class="list-inline-item">
                        <fa-icon
                          [icon]="['fas', 'info-circle']"
                          class="inverseLink"
                          ngbTooltip="Customize the fields users are required to submit when adding an idea."
                        ></fa-icon>
                      </li>
                      <li class="list-inline-item float-right adjustFloat">
                        <fa-icon
                          [icon]="[
                            'fas',
                            toggleCollaboration ? 'angle-up' : 'angle-down'
                          ]"
                          class="inverseLink iconLarge"
                        ></fa-icon>
                      </li>
                    </ul>
                    <p class="mb-0 text-muted small">
                      Control your challenge.
                    </p>
                  </div>
                </div>
              </div> -->
              <div class="card-body p-0" *ngIf="toggleCollaboration">
                <div class="row">
                  <div class="col-12">
                    <div class="card rounded-0 border-0" *ngIf="false">
                      <div class="card-header customLeftPadding">
                        <label class="mb-0 text-medium">
                          Challenge
                          {{
                            'ChallengePost.Labels.ExperienceSettings'
                              | translationPipe
                          }}
                        </label>
                      </div>
                      <div
                        class="card-body customLeftPadding pb-2 pt-0 text-medium"
                      >
                        <div class="form-row pt-2 pb-2 dottedBottomBorder">
                          <div class="col-9 form-group mb-0">
                            <label class="mb-0 font-weight-normal">
                              Submission of New Ideas
                            </label>
                          </div>
                          <div class="form-group col-3 mb-0">
                            <div
                              class="custom-control custom-switch mr-auto float-right"
                            >
                              <input
                                type="checkbox"
                                class="custom-control-input pointer"
                                id="submissionSettings"
                              />
                              <label
                                class="switchLabel custom-control-label font-weight-normal"
                                for="voting"
                              >
                                <span
                                  *ngIf="challengeSettings.allowSubmissions"
                                  class="pl-1"
                                  >{{
                                    'ChallengePost.Labels.Enabled'
                                      | translationPipe
                                  }}</span
                                >
                                <span
                                  *ngIf="!challengeSettings.allowSubmissions"
                                >
                                  Disabled
                                </span>
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="form-row dottedBottomBorder pt-2 pb-2">
                          <div class="form-group col-9 mb-0">
                            <label
                              class="mb-0 font-weight-normal text-medium"
                              >{{
                                'ChallengePost.Labels.ChallengeLeaderboard'
                                  | translationPipe
                              }}</label
                            >
                          </div>
                          <div class="form-group col-3 mb-0">
                            <div
                              class="custom-control custom-switch mr-auto float-right"
                            >
                              <input
                                type="checkbox"
                                class="custom-control-input pointer"
                                [checked]="
                                  challengeSettings.challengeLeaderboard
                                "
                                [(ngModel)]="
                                  challengeSettings.challengeLeaderboard
                                "
                                id="leaderboard"
                              />
                              <label
                                class="custom-control-label"
                                for="leaderboard"
                              >
                                {{
                                  'ChallengePost.Labels.Enabled'
                                    | translationPipe
                                }}
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="card-header customLeftPadding border-top">
                        <label class="mb-0 text-medium"
                          >Submission
                          {{
                            'ChallengePost.Labels.VisibilitySettings'
                              | translationPipe
                          }}</label
                        >
                      </div>
                      <div class="card-body customLeftPadding py-2 text-medium">
                        <div class="row">
                          <div class="col-7">
                            <div
                              class="custom-control custom-radio mb-2 mt-2 text-medium"
                            >
                              <input
                                type="radio"
                                id="public"
                                name="customRadio"
                                class="custom-control-input"
                              />
                              <label
                                class="custom-control-label font-weight-normal"
                                for="public"
                              >
                                <b>{{
                                  'ChallengePost.Labels.Public'
                                    | translationPipe
                                }}</b>
                                -
                                {{
                                  'ChallengePost.Labels.PublicAccess'
                                    | translationPipe
                                }}
                              </label>
                            </div>
                            <div
                              class="custom-control custom-radio mb-2 text-medium"
                            >
                              <input
                                type="radio"
                                id="specificGroups"
                                name="customRadio"
                                class="custom-control-input"
                              />
                              <label
                                class="custom-control-label font-weight-normal"
                                for="specificGroups"
                                ><b>{{
                                  'ChallengePost.Labels.SpecificGroups'
                                    | translationPipe
                                }}</b>
                                -
                                {{
                                  'ChallengePost.Labels.SpecificGroupsAccess'
                                    | translationPipe
                                }}</label
                              >
                            </div>
                            <div class="card bg-light mb-2 shadow-sm">
                              <div class="card-body pt-2">
                                <label class="small bold">{{
                                  'ChallengePost.Labels.SelectGroups'
                                    | translationPipe
                                }}</label>
                                <app-search-groups
                                  [isUser]="true"
                                  [selection]="participants"
                                ></app-search-groups>
                              </div>
                            </div>
                            <div
                              class="custom-control custom-radio mb-2 text-medium"
                            >
                              <input
                                type="radio"
                                id="private"
                                name="customRadio"
                                class="custom-control-input"
                              />
                              <label
                                class="custom-control-label font-weight-normal"
                                for="private"
                              >
                                <b>{{
                                  'ChallengePost.Labels.Private'
                                    | translationPipe
                                }}</b>
                                -
                                {{
                                  'ChallengePost.Labels.PrivateAccess'
                                    | translationPipe
                                }}
                              </label>
                            </div>
                          </div>
                          <div class="col-5">
                            <div class="alert h-100 bg-light">
                              Control who has access to the submissions on your
                              challenge. By default, only the users targeted for
                              this challenge can see the submissions to it.
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- <div class="card rounded-0 border-0">
                      <div class="card-body pb-0 pt-4">
                        <p class="mb-0 pb-1 bold montserrat border-bottom">
                          Experience Settings
                        </p>
                      </div>
                    </div> -->
                    <div class="card rounded-0 border-0">
                      <div class="card-body pb-0 pt-3">
                        <ul class="list-inline mb-0 pt-2">
                          <li class="list-inline-item">
                            <p class="mb-0 pb-1 bold montserrat">
                              Customize Submission Form & Experience
                            </p>
                          </li>
                          <li
                            class="list-inline-item float-right adjustFloatUp"
                          >
                            <app-custom-field-create
                              (updated)="newFieldCreated()"
                              [smallButton]="true"
                            ></app-custom-field-create>
                          </li>
                        </ul>
                        <!-- <ul class="list-inline mx-0 mb-2 pt-2">
                          <li class="list-inline-item text-medium">
                            <label class="mb-0 font-weight-normal pt-1">
                              Customize Information Collected on Submission Form
                            </label>
                          </li>
                        </ul> -->
                        <app-custom-field-submission-form
                          [refreshList]="updateList"
                          (selectedFields)="mapOpportunityTypeFields($event)"
                          [selectedCustomFields]="selectedCustomFields"
                        ></app-custom-field-submission-form>
                        <div class="form-row pt-1 pb-2 mx-0 dottedBottomBorder">
                          <div class="form-group col-9 mb-0">
                            <label class="mb-0 font-weight-normal text-medium">
                              Customize Title and Description Placeholders
                            </label>
                          </div>
                          <div class="form-group col-3 mb-0">
                            <div
                              class="custom-control custom-switch mr-auto float-right adjustFloat text-medium font-weight-normal"
                            >
                              <input
                                type="checkbox"
                                (click)="
                                  customizePlaceholderText = !customizePlaceholderText
                                "
                                class="custom-control-input pointer"
                                id="customizePlaceholders"
                              />
                              <label
                                class="custom-control-label font-weight-normal"
                                for="customizePlaceholders"
                              >
                                <span
                                  *ngIf="customizePlaceholderText"
                                  class="pl-1"
                                >
                                  {{
                                    'ChallengePost.Labels.Enabled'
                                      | translationPipe
                                  }}
                                </span>
                                <span *ngIf="!customizePlaceholderText">
                                  {{ 'SharedText.Disabled' | translationPipe }}
                                </span>
                              </label>
                            </div>
                          </div>
                        </div>
                        <div
                          class="card bg-light rounded-top-0 border-top-0 mb-2"
                          *ngIf="customizePlaceholderText"
                        >
                          <div class="card-body p-3">
                            <div class="form-row">
                              <div class="col-12 form-group mb-3">
                                <label class="text-medium"
                                  >Title Placeholder</label
                                >
                                <input
                                  type="text"
                                  class="form-control form-control-sm"
                                  [(ngModel)]="challenge.postTitlePlaceholder"
                                />
                              </div>
                            </div>
                            <div class="form-row">
                              <div class="col-12 form-group mb-2">
                                <label class="text-medium"
                                  >Description Placeholder</label
                                >
                                <textarea
                                  class="form-control form-control-sm"
                                  rows="2"
                                  [(ngModel)]="challenge.postDescPlaceholder"
                                ></textarea>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="form-row pt-2 pb-0 mx-0">
                          <div class="form-group col-9 mb-0">
                            <label class="mb-0 font-weight-normal text-medium">
                              {{
                                'ChallengePost.Labels.DetectDuplicateSubmissions'
                                  | translationPipe
                              }}
                            </label>
                          </div>
                          <div class="form-group col-3 mb-0">
                            <div
                              class="custom-control custom-switch mr-auto float-right adjustFloat text-medium font-weight-normal"
                            >
                              <input
                                type="checkbox"
                                class="custom-control-input pointer"
                                [checked]="challenge.enableDupDetection"
                                [(ngModel)]="challenge.enableDupDetection"
                                id="enableDupDetection"
                              />
                              <label
                                class="custom-control-label font-weight-normal"
                                for="enableDupDetection"
                              >
                                <span
                                  *ngIf="challenge.enableDupDetection"
                                  class="pl-1"
                                >
                                  {{
                                    'ChallengePost.Labels.Enabled'
                                      | translationPipe
                                  }}
                                </span>
                                <span *ngIf="!challenge.enableDupDetection">
                                  {{ 'SharedText.Disabled' | translationPipe }}
                                </span>
                              </label>
                            </div>
                          </div>
                        </div>
                        <!-- if duplicate idea submission enabled -->
                        <div
                          class="card bg-light rounded-top-0 mt-2"
                          *ngIf="challenge.enableDupDetection"
                        >
                          <div class="card-body py-2 px-2">
                            <div class="form-row">
                              <div class="form-group col-6 mb-1">
                                <div
                                  class="card text-center cardAnimation pointer selectStakeholder shadow-sm"
                                  [ngClass]="{
                                    active: !challenge?.challengeOnlyDuplicates
                                  }"
                                  (click)="
                                    challenge.challengeOnlyDuplicates = false
                                  "
                                >
                                  <div class="card-body px-2 py-2">
                                    <ul class="list-unstyled text-center mb-0">
                                      <li class="mb-1">
                                        <fa-icon
                                          [icon]="['fas', 'globe']"
                                          class="icon iconLarge"
                                        ></fa-icon>
                                      </li>
                                      <li class="montserrat">
                                        <p class="mb-1 bold">
                                          {{
                                            'ChallengePost.Labels.AllIdeasAccess'
                                              | translationPipe
                                          }}
                                        </p>
                                      </li>
                                      <li>
                                        <p class="small">
                                          {{
                                            'ChallengePost.Labels.AllIdeasAccessDescription'
                                              | translationPipe
                                          }}
                                        </p>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                              <div class="form-group col-6 mb-0">
                                <div
                                  class="card text-center cardAnimation pointer selectStakeholder shadow-sm"
                                  [ngClass]="{
                                    active: challenge?.challengeOnlyDuplicates
                                  }"
                                  (click)="
                                    challenge.challengeOnlyDuplicates = true
                                  "
                                >
                                  <div class="card-body px-2 py-2">
                                    <ul class="list-unstyled text-center mb-0">
                                      <li class="mb-1">
                                        <fa-icon
                                          [icon]="['fas', 'bullseye']"
                                          class="icon iconLarge"
                                        ></fa-icon>
                                      </li>
                                      <li class="montserrat">
                                        <p class="mb-1 bold">
                                          {{
                                            'ChallengePost.Labels.OnlyChallengeIdeas'
                                              | translationPipe
                                          }}
                                        </p>
                                      </li>
                                      <li>
                                        <p class="small">
                                          {{
                                            'ChallengePost.Labels.OnlyChallengeIdeasDescription'
                                              | translationPipe
                                          }}
                                        </p>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- <div class="form-row mb-0">
                              <div class="form-group col-5 mb-0 pl-0">
                                <label class="small bold">
                                  {{
                                    'ChallengePost.Labels.SelectDuplicatesScope'
                                      | translationPipe
                                  }}
                                </label>
                                <p class="small text-muted mb-1">
                                  {{
                                    'ChallengePost.Labels.SelectDuplicatesScopeDescription'
                                      | translationPipe
                                  }}
                                </p>
                              </div>
                              <div class="form-group col-7 mb-0">
                                <select class="form-control">
                                  <option>
                                    All Submissions
                                  </option>
                                  <option>
                                    Only Submissions in this Challenge
                                  </option>
                                </select>
                              </div>
                            </div> -->
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card rounded-0 border-0">
                      <!-- <div
                        class="card-header bg-white rounded-top-0 border-top-0 customLeftPadding"
                      >
                        <label class="mb-0 montserrat">Collaboration Settings on Submissions</label>
                      </div> -->
                      <div class="card-body pb-0 pt-4">
                        <p class="mb-0 pb-1 bold montserrat border-bottom">
                          Collaboration Settings on Submissions
                        </p>
                        <div class="form-row text-medium">
                          <div class="form-group col-12 mb-0">
                            <div
                              class="form-row dottedBottomBorder pb-2 mx-0"
                              style="padding-top: 10px;"
                            >
                              <div class="form-group col-9 mb-0">
                                <!-- <label class="mb-0 font-weight-normal">{{
                                  'ChallengePost.Labels.AllowVoting'
                                    | translationPipe
                                }}</label> -->
                                <label
                                  class="mb-0 font-weight-normal"
                                  placement="right"
                                  ngbTooltip="If enabled, participants will be able to vote on submissions made to this challenge."
                                  >Allow Voting on Submissions
                                  <fa-icon
                                    [icon]="['fas', 'question-circle']"
                                    class="text-muted ml-1"
                                  ></fa-icon>
                                </label>
                              </div>
                              <div class="form-group col-3 mb-0">
                                <div
                                  class="custom-control custom-switch mr-auto float-right"
                                >
                                  <input
                                    type="checkbox"
                                    class="custom-control-input pointer"
                                    [checked]="challengeSettings.allowVoting"
                                    [(ngModel)]="challengeSettings.allowVoting"
                                    id="voting"
                                  />
                                  <label
                                    class="switchLabel custom-control-label font-weight-normal"
                                    for="voting"
                                  >
                                    <span
                                      *ngIf="challengeSettings.allowVoting"
                                      class="pl-1"
                                      >{{
                                        'ChallengePost.Labels.Enabled'
                                          | translationPipe
                                      }}</span
                                    >
                                    <span *ngIf="!challengeSettings.allowVoting"
                                      >Disabled</span
                                    >
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div
                              class="form-row dottedBottomBorder pt-2 pb-2 mx-0"
                            >
                              <div class="form-group col-9 mb-0">
                                <!-- <label class="mb-0 font-weight-normal">{{
                                  'ChallengePost.Labels.AllowCommenting'
                                    | translationPipe
                                }}</label> -->
                                <label
                                  class="mb-0 font-weight-normal"
                                  placement="right"
                                  ngbTooltip="If enabled, participants will be able to comment on submissions made to this challenge."
                                  >Allow Commenting on Submissions
                                  <fa-icon
                                    [icon]="['fas', 'question-circle']"
                                    class="text-muted ml-1"
                                  ></fa-icon>
                                </label>
                              </div>
                              <div class="form-group col-3 mb-0">
                                <div
                                  class="custom-control custom-switch mr-auto float-right"
                                >
                                  <input
                                    type="checkbox"
                                    class="custom-control-input pointer"
                                    [checked]="
                                      challengeSettings.allowCommenting
                                    "
                                    [(ngModel)]="
                                      challengeSettings.allowCommenting
                                    "
                                    id="commenting"
                                  />
                                  <label
                                    class="custom-control-label font-weight-normal"
                                    for="commenting"
                                  >
                                    <span
                                      *ngIf="challengeSettings.allowCommenting"
                                      class="pl-1"
                                      >{{
                                        'ChallengePost.Labels.Enabled'
                                          | translationPipe
                                      }}</span
                                    >
                                    <span
                                      *ngIf="!challengeSettings.allowCommenting"
                                      >Disabled</span
                                    >
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div
                              class="form-row dottedBottomBorder pt-2 pb-2 mx-0"
                            >
                              <div class="form-group col-9 mb-0">
                                <!-- <label class="mb-0 font-weight-normal">{{
                                  'ChallengePost.Labels.AllowSharing'
                                    | translationPipe
                                }}</label> -->
                                <label
                                  class="mb-0 font-weight-normal"
                                  placement="right"
                                  ngbTooltip="If enabled, participants will be able to share submissions made to this challenge."
                                  >Allow Sharing of Submissions
                                  <fa-icon
                                    [icon]="['fas', 'question-circle']"
                                    class="text-muted ml-1"
                                  ></fa-icon>
                                </label>
                              </div>
                              <div class="form-group col-3 mb-0">
                                <div
                                  class="custom-control custom-switch mr-auto float-right"
                                >
                                  <input
                                    type="checkbox"
                                    class="custom-control-input pointer"
                                    [checked]="challengeSettings.allowSharing"
                                    [(ngModel)]="challengeSettings.allowSharing"
                                    id="sharing"
                                  />
                                  <label
                                    class="custom-control-label font-weight-normal"
                                    for="sharing"
                                  >
                                    <span
                                      *ngIf="challengeSettings.allowSharing"
                                      class="pl-1"
                                      >{{
                                        'ChallengePost.Labels.Enabled'
                                          | translationPipe
                                      }}</span
                                    >
                                    <span
                                      *ngIf="!challengeSettings.allowSharing"
                                      >Disabled</span
                                    >
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- <div class="card-header border-top customLeftPadding">
                        <label class="mb-0 text-medium"
                          >Anonymous Posting Settings</label
                        >
                      </div> -->
                      <div class="card-body pb-0 pt-3">
                        <p class="mb-0 pb-1 bold montserrat border-bottom">
                          Anonymous Posting Settings
                        </p>
                        <div
                          class="form-row dottedBottomBorder pt-2 pb-2 mx-0"
                          *ngFor="let anonymousSetting of anonymousSettingsKeys"
                        >
                          <div class="form-group col-9 mb-0">
                            <label class="mb-0 font-weight-normal text-medium">
                              {{
                                'ChallengePost.Labels.' +
                                  capitalizeFirstLetter(anonymousSetting)
                                  | translationPipe
                              }}
                            </label>
                          </div>
                          <div class="form-group col-3 mb-0">
                            <div
                              class="custom-control custom-switch mr-auto float-right"
                            >
                              <input
                                type="checkbox"
                                class="custom-control-input pointer"
                                [checked]="challengeSettings[anonymousSetting]"
                                [(ngModel)]="
                                  challengeSettings[anonymousSetting]
                                "
                                [id]="anonymousSetting"
                              />
                              <label
                                class="custom-control-label text-medium font-weight-normal"
                                [for]="anonymousSetting"
                              >
                                <span
                                  *ngIf="challengeSettings[anonymousSetting]"
                                  class="pl-1"
                                  >{{
                                    'ChallengePost.Labels.Enabled'
                                      | translationPipe
                                  }}</span
                                >
                                <span
                                  *ngIf="!challengeSettings[anonymousSetting]"
                                  >Disabled</span
                                >
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- <div class="card-header border-top customLeftPadding">
                        <p class="bold mb-0">Submission Visibility Settings</p>
                      </div> -->
                      <div class="card-body px-3 pb-0 pt-4">
                        <p class="mb-1 pb-1 bold montserrat border-bottom">
                          Who Can See Submissions on This Challenge
                        </p>
                        <div class="form-row">
                          <div class="form-group col-md-12 col-12">
                            <app-visibility-submission-form
                              [submissionVisibilitySetting]="
                                submissionVisibilitySetting
                              "
                              (visibilitySettings)="submissionsObj = $event"
                            ></app-visibility-submission-form>
                          </div>
                        </div>
                      </div>
                      <!-- <div
                        class="card-header border-top customLeftPadding pr-2"
                      >
                        <ul class="list-inline mb-0">
                          <li class="list-inline-item">
                            <label class="mb-0 text-medium">Prizes</label>
                          </li>
                          <li class="list-inline-item float-right pr-2">
                            <app-prize-add
                              (dataSet)="newPrize($event)"
                              [userPermissions]="userChallengePermissions"
                            ></app-prize-add>
                          </li>
                        </ul>
                      </div> -->
                      <div class="card-body px-3 pb-3 pt-0">
                        <ul class="list-inline mb-1 pb-1 border-bottom">
                          <li class="list-inline-item">
                            <p class="mb-0 bold montserrat">
                              Prizes for this Challenge
                            </p>
                          </li>
                          <li
                            class="list-inline-item float-right adjustFloatUp"
                          >
                            <app-prize-add
                              (dataSet)="newPrize($event)"
                              [userPermissions]="userChallengePermissions"
                            ></app-prize-add>
                          </li>
                        </ul>
                        <app-prize-list
                          [prizes]="prizes"
                          (outputPrizes)="updatePrize($event)"
                        ></app-prize-list>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card mb-2 shadow-sm d-none">
              <div
                class="card-header pointer addHoverTwo"
                (click)="toggleIntegrations = !toggleIntegrations"
              >
                <div class="media">
                  <fa-icon
                    [icon]="['fas', 'database']"
                    class="text-muted iconLarge mr-3"
                  ></fa-icon>
                  <div class="media-body">
                    <ul class="list-inline mb-0">
                      <li class="list-inline-item">
                        <p class="mb-0">Integrations</p>
                      </li>
                      <li class="list-inline-item">
                        <fa-icon
                          [icon]="['fas', 'info-circle']"
                          class="inverseLink"
                          ngbTooltip="Customize the fields users are required to submit when adding an idea."
                        ></fa-icon>
                      </li>
                      <li class="list-inline-item float-right adjustFloat">
                        <fa-icon
                          [icon]="[
                            'fas',
                            toggleIntegrations ? 'angle-up' : 'angle-down'
                          ]"
                          class="inverseLink iconLarge"
                        ></fa-icon>
                      </li>
                    </ul>
                    <p class="mb-0 text-muted small">
                      Supercharge your challenge by adding custom integrations
                      to it.
                    </p>
                  </div>
                </div>
              </div>
              <div class="card-body p-2" *ngIf="toggleIntegrations">
                <div class="form-row">
                  <div class="form-group mb-0 col-md-3 col-12">
                    <label class="pt-2">Integrations and Access</label>
                  </div>
                  <div class="form-group col-md-9 col-12 mb-0">
                    <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
                      <div class="form-group col-9 mb-0">
                        <label class="mb-0 font-weight-normal"
                          >Enable Idea Submission via Email</label
                        >
                      </div>
                      <div class="form-group col-3 mb-0">
                        <div
                          class="custom-control custom-switch mr-auto float-right"
                        >
                          <input
                            type="checkbox"
                            class="custom-control-input pointer"
                            id="emailSubmission"
                          />
                          <label
                            class="custom-control-label"
                            for="emailSubmission"
                            >Enabled</label
                          >
                        </div>
                      </div>
                    </div>
                    <!-- if enable idea submission via email -->
                    <!-- <div class="card mb-0 rounded-0 border-top-0 bg-light">
                                              <div class="card-body px-3 py-3">
                                                <div class="form-row">
                                                  <div class="form-group col-5 mb-0">
                                                    <label class="font-weight-normal">Enter Email Address</label>
                                                    <p class="small text-muted mb-0">Enter the email address that users will be able to submit ideas to during
                                                      your
                                                      challenge.</p>
                                                  </div>
                                                  <div class="form-group col-7 mb-0">
                                                    <input type="text" class="form-control" placeholder="ideas@examplecompany.com">
                                                  </div>
                                                </div>
                                              </div>
                                            </div> -->
                    <!-- end if enable idea submission via email -->
                    <!-- <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
                                              <div class="form-group col-9 mb-0">
                                                <label class="mb-0 font-weight-normal">Enable External Submission Form</label>
                                              </div>
                                              <div class="form-group col-3 mb-0">
                                                <div class="custom-control custom-switch mr-auto float-right">
                                                  <input type="checkbox" class="custom-control-input pointer" id="externalSubmission">
                                                  <label class="custom-control-label" for="externalSubmission">Enabled</label>
                                                </div>
                                              </div>
                                            </div> -->
                    <!-- if external submission form enabled -->
                    <!-- <div class="card rounded-0 border-top-0 bg-light" *ngIf="externalSubmission">
                                              <div class="card-body px-3 py-3">
                                                <div class="form-row">
                                                  <div class="form-group col-7 mb-2">
                                                    <label class="font-weight-normal">Customize External Submission Form</label>
                                                    <p class="small text-muted mb-0">An embeddable iframe that you can embed on an external webpage will be
                                                      generated once you publish your challenge.</p>
                                                  </div>
                                                  <div class="form-group col-5 mb-0">
                                                    <button class="btn btn-primary float-right">Customize Submission Form</button>
                                                  </div>
                                                </div>
                                              </div>
                                            </div> -->
                    <!-- end if external submission form enabled -->
                    <!-- <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
                                              <div class="form-group col-7 mb-0">
                                                <label class="mb-0 font-weight-normal">Enable Custom URL for This Challenge</label>
                                              </div>
                                              <div class="form-group col-5 mb-0">
                                                <div class="custom-control custom-switch mr-auto float-right">
                                                  <input type="checkbox" class="custom-control-input pointer" id="customUrl">
                                                  <label class="custom-control-label" for="customUrl">Enabled</label>
                                                </div>
                                              </div>
                                            </div> -->
                    <!-- if enable custom URL for this challenge -->
                    <!-- <div class="card mb-0 rounded-0 border-top-0 bg-light" *ngIf="vanityURL">
                                              <div class="card-body px-3 py-3">
                                                <div class="form-row">
                                                  <div class="form-group col-5 mb-0">
                                                    <label class="font-weight-normal">Enter Vanity URL</label>
                                                    <p class="small text-muted mb-0">This vanity URL will redirect to the home page of your challenge.</p>
                                                  </div>
                                                  <div class="form-group col-7 mb-0">
                                                    <div class="input-group mb-3">
                                                      <div class="input-group-prepend">
                                                        <span class="input-group-text">company.ideawake.com/</span>
                                                      </div>
                                                      <input type="text" class="form-control" placeholder="challengename">
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div> -->
                  </div>
                  <div class="form-row d-none">
                    <div class="form-group mb-0 col-md-3 col-12">
                      <label class="pt-2">{{
                        'ChallengePost.Labels.AnonymousSettings'
                          | translationPipe
                      }}</label>
                    </div>
                    <div class="form-group col-md-9 col-12 mb-0">
                      <div
                        class="form-row dottedBottomBorder pt-2 pb-2 mx-0"
                        *ngFor="let anonymousSetting of anonymousSettingsKeys"
                      >
                        <div class="form-group col-9 mb-0">
                          <label class="mb-0 font-weight-normal">
                            {{
                              'ChallengePost.Labels.' +
                                capitalizeFirstLetter(anonymousSetting)
                                | translationPipe
                            }}
                          </label>
                        </div>
                        <div class="form-group col-3 mb-0">
                          <div
                            class="custom-control custom-switch mr-auto float-right"
                          >
                            <input
                              type="checkbox"
                              class="custom-control-input pointer"
                              [checked]="challengeSettings[anonymousSetting]"
                              [(ngModel)]="challengeSettings[anonymousSetting]"
                              [id]="anonymousSetting"
                            />
                            <label
                              class="custom-control-label"
                              [for]="anonymousSetting"
                            >
                              {{
                                'ChallengePost.Labels.Enabled' | translationPipe
                              }}
                            </label>
                          </div>
                        </div>
                      </div>
                      <!-- end of insert -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="card mb-2 shadow-sm">
              <div
                class="card-header pointer addHoverTwo"
                (click)="toggleSubmissionForm = !toggleSubmissionForm"
              >
                <div class="media">
                  <fa-icon
                    [icon]="['fas', 'clipboard-list']"
                    class="text-muted iconLarge mr-3"
                  ></fa-icon>
                  <div class="media-body">
                    <ul class="list-inline mb-0">
                      <li class="list-inline-item">
                        <p class="mb-0">Customize Submission Form</p>
                      </li>
                      <li class="list-inline-item">
                        <fa-icon
                          [icon]="['fas', 'info-circle']"
                          class="inverseLink"
                          ngbTooltip="Customize the fields users are required to submit when adding an idea."
                        ></fa-icon>
                      </li>
                      <li class="list-inline-item float-right adjustFloat">
                        <fa-icon
                          [icon]="[
                            'fas',
                            toggleSubmissionForm ? 'angle-up' : 'angle-down'
                          ]"
                          class="inverseLink iconLarge"
                        ></fa-icon>
                      </li>
                    </ul>
                    <p class="mb-0 text-muted small">
                      Customize the fields users are required to submit when
                      adding an idea.
                    </p>
                  </div>
                </div>
              </div>
              <div class="card-body p-2" *ngIf="toggleSubmissionForm">
                <div class="row">
                  <div class="col-7">
                    <p class="mb-2 pb-2 text-muted small border-bottom">
                      These are the fields collected when this opportunity is
                      added to Ideawake. You can customize the order that they
                      appear by dragging and dropping them.
                    </p>
                    <app-search-fields></app-search-fields>
                    <hr />
                    <app-fields-list></app-fields-list>
                  </div>
                  <div class="col-5">
                    <div class="card">
                      <div class="card-body p-2">
                        <div class="form-row">
                          <div class="form-group col-12 mb-0">

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
            <div class="card shadow-sm d-none">
              <div
                class="card-header pointer addHoverTwo"
                (click)="togglePrizes = !togglePrizes"
              >
                <div class="media">
                  <fa-icon
                    [icon]="['fas', 'trophy']"
                    class="text-muted iconLarge mr-3"
                  ></fa-icon>
                  <div class="media-body">
                    <ul class="list-inline mb-0">
                      <li class="list-inline-item">
                        <p class="mb-0">Manage Prizes</p>
                      </li>
                      <li class="list-inline-item">
                        <fa-icon
                          [icon]="['fas', 'info-circle']"
                          class="inverseLink"
                          ngbTooltip="Customize the fields users are required to submit when adding an idea."
                        ></fa-icon>
                      </li>
                      <li class="list-inline-item float-right adjustFloat">
                        <fa-icon
                          [icon]="[
                            'fas',
                            togglePrizes ? 'angle-up' : 'angle-down'
                          ]"
                          class="inverseLink iconLarge"
                        ></fa-icon>
                      </li>
                    </ul>
                    <p class="mb-0 text-muted small">
                      Customize the fields users are required to submit when
                      adding an idea.
                    </p>
                  </div>
                </div>
              </div>
              <div class="card-body p-2" *ngIf="togglePrizes"></div>
            </div>
          </div>
        </div>
        <!-- <div class="form-row">
          <div class="form-group col-md-3 col-12">
            <label class="pt-2">
              Submission Form
            </label>
            <p class="mb-2 pb-2 text-muted small border-bottom">
              These are the fields collected when this
              opportunity is added to Ideawake. You can
              customize the order that they appear by
              dragging and dropping them.
            </p>
          </div>
          <div class="form-group col-md-9 col-12">
            <div class="card shadow-sm mt-2">
              <div class="card-header px-0">
                <label class="mb-0">Add Fields</label>
              </div>
              <div class="card-body">
                <app-search-fields></app-search-fields>
                <hr>
                <app-fields-list></app-fields-list>
              </div>
            </div>
          </div>
        </div> -->
        <!-- prizes -->
        <!-- <div class="form-row">
          <div class="form-group col-md-3 col-12">
            <label class="pt-2">
              Challenge Prizes
            </label>
          </div>
          <div class="form-group col-md-9 col-12">
            <div class="card shadow-sm mt-2">
              <div class="card-header px-0">
                <ul class="list-inline mb-0">
                  <li class="list-inline-item pl-2">
                    <label class="mb-0">Prizes</label>
                  </li>
                  <li class="list-inline-item float-right pr-2">
                    <app-prize-add
                      (dataSet)="newPrize($event)"
                      [userPermissions]="userChallengePermissions"
                    ></app-prize-add>
                  </li>
                </ul>
              </div>
              <div class="card-body p-0">
                <app-prize-list
                  [prizes]="prizes"
                  (outputPrizes)="updatePrize($event)"
                ></app-prize-list>
              </div>
            </div>
          </div>
        </div> -->
        <!-- start of insert -->
        <div class="form-row d-none">
          <div class="form-group col-md-3 col-12">
            <label class="pt-2"
              >Submission
              {{
                'ChallengePost.Labels.VisibilitySettings' | translationPipe
              }}</label
            >
          </div>
          <div class="form-group col-md-9 col-12">
            <!-- updated visibility widget -->
            <!-- <div class="form-row pt-2">
              <div class="form-group col-4 mb-2">
                <div
                  class="card text-center cardAnimation shadow-sm pointer selectStakeholder active"
                  ngbTooltip="All users who have access to the community can view submissions to this challenge."
                >
                  <div class="card-body p-2">
                    <ul class="list-unstyled text-center">
                      <li>
                        <fa-icon
                          [icon]="['fas', 'eye']"
                          class="icon iconLarge"
                        ></fa-icon>
                      </li>
                      <li>
                        <label>
                          Public
                        </label>
                      </li>
                      <li>
                        <p class="small mb-0">5,250 Users</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="form-group col-4 mb-2">
                <div
                  class="card text-center cardAnimation shadow-sm pointer selectStakeholder"
                  (click)="toggleSpecificMembersStageActivity()"
                  ngbTooltip="Only the groups you designate will be able to view submissions made to this challenge."
                >
                  <div class="card-body p-2">
                    <ul class="list-unstyled text-center">
                      <li>
                        <fa-icon
                          [icon]="['fas', 'users']"
                          class="icon iconLarge"
                        ></fa-icon>
                      </li>
                      <li>
                        <label>
                          Specific Groups
                        </label>
                      </li>
                      <li>
                        <p class="small mb-0">5,250 Users</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="form-group col-4 mb-2">
                <div
                  class="card text-center cardAnimation shadow-sm pointer selectStakeholder"
                  ngbTooltip="Only Challenge Sponsor, Challenge Moderators, Owners, Team Members, and the idea submitter will be able to see this idea."
                >
                  <div class="card-body p-2">
                    <ul class="list-unstyled text-center">
                      <li>
                        <fa-icon
                          [icon]="['fas', 'eye-slash']"
                          class="icon iconLarge"
                        ></fa-icon>
                      </li>
                      <li>
                        <label>
                          Private
                        </label>
                      </li>
                      <li>
                        <p class="small mb-0">Limited Visbility</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div> -->
            <!-- end updated visibility widget -->
            <!-- <div class="custom-control custom-radio mb-2 mt-2 text-medium">
              <input
                type="radio"
                id="public"
                name="customRadio"
                class="custom-control-input"
                checked
              />
              <label
                class="custom-control-label font-weight-normal"
                for="public"
              >
                <b>{{ 'ChallengePost.Labels.Public' | translationPipe }}</b>
                -
                {{ 'ChallengePost.Labels.PublicAccess' | translationPipe }}
              </label>
            </div>
            <div class="custom-control custom-radio mb-2 text-medium">
              <input
                type="radio"
                id="specificGroups"
                name="customRadio"
                class="custom-control-input"
              />
              <label
                class="custom-control-label font-weight-normal"
                for="specificGroups"
                ><b>{{
                  'ChallengePost.Labels.SpecificGroups' | translationPipe
                }}</b>
                -
                {{
                  'ChallengePost.Labels.SpecificGroupsAccess' | translationPipe
                }}</label
              >
            </div>
            <div class="card bg-light mb-2 shadow-sm" *ngIf="selectGroups">
              <div class="card-body pt-2">
                <label class="small bold">{{
                  'ChallengePost.Labels.SelectGroups' | translationPipe
                }}</label>
                <app-search-groups
                  [isUser]="true"
                  [selection]="participants"
                ></app-search-groups>
              </div>
            </div>
            <div class="custom-control custom-radio mb-2 text-medium">
              <input
                type="radio"
                id="private"
                name="customRadio"
                class="custom-control-input"
              />
              <label
                class="custom-control-label font-weight-normal"
                for="private"
              >
                <b>{{ 'ChallengePost.Labels.Private' | translationPipe }}</b>
                -
                {{ 'ChallengePost.Labels.PrivateAccess' | translationPipe }}
              </label>
            </div> -->
          </div>
        </div>
        <!-- <div class="form-row">
          <div class="form-group mb-0 col-md-3 col-12">
            <label class="pt-2">Collaboration Settings</label>
          </div>
          <div class="form-group col-md-9 col-12 mb-0">
            <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
              <div class="form-group col-9 mb-0">
                <label class="mb-0 font-weight-normal">{{
                  'ChallengePost.Labels.AllowVoting' | translationPipe
                }}</label>
              </div>
              <div class="form-group col-3 mb-0">
                <div class="custom-control custom-switch mr-auto float-right">
                  <input
                    type="checkbox"
                    class="custom-control-input pointer"
                    [checked]="challengeSettings.allowVoting"
                    [(ngModel)]="challengeSettings.allowVoting"
                    id="voting"
                  />
                  <label class="custom-control-label" for="voting">{{
                    'ChallengePost.Labels.Enabled' | translationPipe
                  }}</label>
                </div>
              </div>
            </div>
            <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
              <div class="form-group col-9 mb-0">
                <label class="mb-0 font-weight-normal">{{
                  'ChallengePost.Labels.AllowCommenting' | translationPipe
                }}</label>
              </div>
              <div class="form-group col-3 mb-0">
                <div class="custom-control custom-switch mr-auto float-right">
                  <input
                    type="checkbox"
                    class="custom-control-input pointer"
                    [checked]="challengeSettings.allowCommenting"
                    [(ngModel)]="challengeSettings.allowCommenting"
                    id="commenting"
                  />
                  <label class="custom-control-label" for="commenting">{{
                    'ChallengePost.Labels.Enabled' | translationPipe
                  }}</label>
                </div>
              </div>
            </div>
            <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
              <div class="form-group col-9 mb-0">
                <label class="mb-0 font-weight-normal">{{
                  'ChallengePost.Labels.AllowSharing' | translationPipe
                }}</label>
              </div>
              <div class="form-group col-3 mb-0">
                <div class="custom-control custom-switch mr-auto float-right">
                  <input
                    type="checkbox"
                    class="custom-control-input pointer"
                    [checked]="challengeSettings.allowSharing"
                    [(ngModel)]="challengeSettings.allowSharing"
                    id="sharing"
                  />
                  <label class="custom-control-label" for="sharing">
                    {{ 'ChallengePost.Labels.Enabled' | translationPipe }}
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div> -->
        <div class="form-row">
          <!-- <div class="form-group mb-0 col-md-3 col-12">
            <label class="pt-2">{{
              'ChallengePost.Labels.ExperienceSettings' | translationPipe
            }}</label>
          </div> -->
          <div class="form-group mb-0 col-md-9 col-12">
            <!-- <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
                              <div class="form-group col-9 mb-0">
                                <label class="mb-0 font-weight-normal">Allow Teams</label>
                              </div>
                              <div class="form-group col-3 mb-0">
                                <div class="custom-control custom-switch mr-auto float-right">
                                  <input type="checkbox" class="custom-control-input pointer" id="participantsTab">
                                  <label class="custom-control-label" for="participantsTab">Enabled</label>
                                </div>
                              </div>
                            </div> -->
            <!-- <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
                              <div class="form-group col-9 mb-0">
                                <label class="mb-0 font-weight-normal">Team Based Idea Submission</label>
                              </div>
                              <div class="form-group col-3 mb-0">
                                <div class="custom-control custom-switch mr-auto float-right">
                                  <input type="checkbox" class="custom-control-input pointer" id="participantsTab">
                                  <label class="custom-control-label" for="participantsTab">Enabled</label>
                                </div>
                              </div>
                            </div> -->
            <!-- <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
              <div class="form-group col-9 mb-0">
                <label class="mb-0 font-weight-normal">{{
                  'ChallengePost.Labels.ChallengeLeaderboard' | translationPipe
                }}</label>
              </div>
              <div class="form-group col-3 mb-0">
                <div class="custom-control custom-switch mr-auto float-right">
                  <input
                    type="checkbox"
                    class="custom-control-input pointer"
                    [checked]="challengeSettings.challengeLeaderboard"
                    [(ngModel)]="challengeSettings.challengeLeaderboard"
                    id="leaderboard"
                  />
                  <label class="custom-control-label" for="leaderboard">
                    {{ 'ChallengePost.Labels.Enabled' | translationPipe }}
                  </label>
                </div>
              </div>
            </div>
            <div class="form-row dottedBottomBorder pt-2 pb-2 mx-0">
              <div class="form-group col-9 mb-0">
                <label class="mb-0 font-weight-normal">
                  {{
                    'ChallengePost.Labels.DetectDuplicateSubmissions'
                      | translationPipe
                  }}
                </label>
              </div>
              <div class="form-group col-3 mb-0">
                <div class="custom-control custom-switch mr-auto float-right">
                  <input
                    type="checkbox"
                    class="custom-control-input pointer"
                    [checked]="challengeSettings.duplicateSubmissions"
                    [(ngModel)]="challengeSettings.duplicateSubmissions"
                    id="duplicateSubmissions"
                  />
                  <label
                    class="custom-control-label"
                    for="duplicateSubmissions"
                  >
                    {{ 'ChallengePost.Labels.Enabled' | translationPipe }}
                  </label>
                </div>
              </div>
            </div>

            <div
              class="card bg-light rounded-0 border-top-0"
              *ngIf="challengeSettings.duplicateSubmissions"
            >
              <div class="card-body pt-3 pb-3">
                <div class="form-row mb-0">
                  <div class="form-group col-5 mb-0">
                    <label class="font-weight-normal">
                      {{
                        'ChallengePost.Labels.SelectDuplicatesScope'
                          | translationPipe
                      }}
                    </label>
                    <p class="small text-muted mb-0">
                      {{
                        'ChallengePost.Labels.SelectDuplicatesScopeDescription'
                          | translationPipe
                      }}
                    </p>
                  </div>
                  <div class="form-group col-7 mb-0">
                    <select class="form-control">
                      <option>{{
                        'ChallengePost.Labels.AllIdeasAccess' | translationPipe
                      }}</option>
                      <option>{{
                        'ChallengePost.Labels.OnlyChallengeIdeas'
                          | translationPipe
                      }}</option>
                    </select>
                  </div>
                </div>
              </div>
            </div> -->
          </div>
        </div>
        <!-- end card body -->
        <div class="card-footer px-3 pb-5 pb-md-3" *ngIf="!modal">
          <div class="form-row">
            <div class="col-6 form-group mb-0">
              <button class="btn btn-light border" (click)="changeTab('brief')">
                <fa-icon [icon]="['fas', 'angle-left']" class="mt-1"></fa-icon>
                {{ 'ChallengePost.Labels.Previous' | translationPipe }}
                <span class="d-none d-md-inline">- Challenge Details</span>
              </button>
            </div>
            <div class="col-6 form-group mb-0">
              <div class="float-right">
                <span ngbTooltip="Coming soon!">
                  <button
                    class="btn btn-light mr-1 disabled"
                    style="cursor: not-allowed;"
                    *ngIf="!challengeId"
                  >
                    <fa-icon
                      [icon]="['fas', 'save']"
                      class="text-muted"
                    ></fa-icon>
                    {{ 'ChallengePost.Labels.SaveDraft' | translationPipe }}
                  </button>
                </span>
                <button
                  class="btn btn-primary mb-0"
                  (click)="setSettings(); changeTab('workflow')"
                >
                  {{ 'ChallengePost.Labels.Next' | translationPipe }}
                  <span class="d-none d-md-inline">- Select Workflow</span>
                  <fa-icon
                    [icon]="['fas', 'angle-right']"
                    class="ml-1"
                  ></fa-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer bg-light" *ngIf="modal">
        <button class="btn btn-light border" (click)="close()">Cancel</button>
        <button class="btn btn-primary ml-1" (click)="updateSettings()">
          Save Changes
        </button>
      </div>
    </div>
  </div>
</div>
